<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Sopa de Letras – Contusiones, caídas y precipitación</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0f1118;
  --card:#181b29;
  --accent:#3cf2a4;
  --danger:#ff597a;
  --text:#f1f1f6;
  --muted:#9aa0b8;
  --border:rgba(255,255,255,0.12);
  --radius:16px;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:
    radial-gradient(circle at top left, rgba(60,242,164,0.2), transparent 40%),
    radial-gradient(circle at bottom right, rgba(255,89,122,0.25), transparent 50%),
    var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
  padding:20px;
}

.container{
  width:100%;
  max-width:1000px;
  background:linear-gradient(135deg, #121522, #090b12);
  border-radius:24px;
  padding:20px 24px 26px;
  border:1px solid var(--border);
  box-shadow:0 20px 45px rgba(0,0,0,0.6);
}

h1{
  margin:0;
  text-align:center;
  letter-spacing:0.08em;
  text-transform:uppercase;
  font-size:1.5rem;
}

.sub{
  text-align:center;
  margin:6px 0 20px;
  color:var(--muted);
  font-size:0.9rem;
}

/* INFO BAR */
.info{
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:10px;
  margin-bottom:15px;
}

.info div{
  background:#0e1018;
  padding:6px 12px;
  border-radius:999px;
  font-size:0.82rem;
  border:1px solid var(--border);
}

/* GAME GRID */
.game{
  display:grid;
  grid-template-columns: 1fr 260px;
  gap:20px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(12, 1fr);
  gap:4px;
  user-select:none;
}

.cell{
  aspect-ratio:1/1;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#151825;
  border-radius:8px;
  border:1px solid var(--border);
  font-weight:600;
  cursor:pointer;
  transition:0.15s;
}

.cell:hover{
  background:#22263a;
}

.cell.selected{
  background:var(--accent);
  color:#08130e;
  font-weight:700;
}

.cell.found{
  background:#2d8c5e;
  color:white;
}

/* WORD LIST */
.word-list{
  background:#10131e;
  border-radius:16px;
  padding:12px;
  border:1px solid var(--border);
}

.word-list h3{
  margin:0 0 6px;
  text-align:center;
  font-size:0.9rem;
  text-transform:uppercase;
  letter-spacing:0.08em;
  color:var(--accent);
}

.word-list ul{
  margin:0;
  padding:0;
  list-style:none;
  font-size:0.85rem;
}

.word-list li{
  margin:4px 0;
  padding:2px 6px;
  border-radius:6px;
}

.word-list li.found{
  text-decoration:line-through;
  color:var(--muted);
}

/* CONTROLS */
.controls{
  margin-top:20px;
  display:flex;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}

button{
  padding:8px 16px;
  border-radius:999px;
  border:1px solid var(--border);
  background:linear-gradient(135deg,var(--accent),#25b97b);
  color:#08130e;
  font-weight:700;
  cursor:pointer;
}

button.secondary{
  background:transparent;
  color:var(--text);
}

button:hover{
  box-shadow:0 0 15px rgba(60,242,164,0.5);
}

/* FINAL */
#final{
  display:none;
  margin-top:15px;
  padding:12px;
  border-radius:12px;
  background:#0f1420;
  border:1px solid var(--border);
  color:var(--muted);
  font-size:0.9rem;
}
</style>
</head>

<body>

<div class="container">
  <h1>Sopa de letras – Contusiones</h1>
  <div class="sub">Causa: caída y precipitación (Medicina Legal)</div>

  <div class="info">
    <div>⏱ Tiempo: <span id="time">0</span> s</div>
    <div>✅ Encontradas: <span id="score">0</span> / 10</div>
  </div>

  <div class="game">
    <div class="grid" id="grid"></div>

    <div class="word-list">
      <h3>Palabras</h3>
      <ul id="words"></ul>
    </div>
  </div>

  <div class="controls">
    <button onclick="location.reload()">↺ Reiniciar juego</button>
    <button class="secondary" onclick="alert('Encuentra las palabras médicas relacionadas con las contusiones, caídas y precipitación.')">
      ¿Cómo se juega?
    </button>
  </div>

  <div id="final"></div>

</div>

<script>
// PALABRAS CLAVE
const wordList = [
 "CONTUSION",
 "CAIDA",
 "PRECIPITACION",
 "HEMATOMA",
 "EQUIMOSIS",
 "TRAUMATISMO",
 "FRACTURA",
 "EDMA",
 "LUXACION",
 "LESION"
];

// TABLERO
const size = 12;
let grid = Array.from({length:size}, ()=> Array(size).fill(""));

// DIRECCIONES
const directions = [
 {x:1,y:0}, {x:0,y:1}, {x:1,y:1}, {x:-1,y:1}
];

function place(word){
 let placed=false;
 while(!placed){
   const dir = directions[Math.floor(Math.random()*directions.length)];
   const x = Math.floor(Math.random()*size);
   const y = Math.floor(Math.random()*size);
   if(canPlace(word,x,y,dir)){
     for(let i=0;i<word.length;i++){
       grid[y+dir.y*i][x+dir.x*i]=word[i];
     }
     placed=true;
   }
 }
}

function canPlace(word,x,y,dir){
 for(let i=0;i<word.length;i++){
   const nx=x+dir.x*i, ny=y+dir.y*i;
   if(nx<0||ny<0||nx>=size||ny>=size) return false;
   if(grid[ny][nx] && grid[ny][nx]!==word[i]) return false;
 }
 return true;
}

wordList.forEach(w=>place(w));

// RELLENA
for(let y=0;y<size;y++){
 for(let x=0;x<size;x++){
   if(!grid[y][x]){
     grid[y][x] = String.fromCharCode(65+Math.floor(Math.random()*26));
   }
 }
}

const gridDiv = document.getElementById('grid');
grid.flat().forEach(letter=>{
 const d=document.createElement("div");
 d.className="cell";
 d.textContent=letter;
 gridDiv.appendChild(d);
});

// LISTA
const ul = document.getElementById("words");
wordList.forEach(w=>{
 const li=document.createElement("li");
 li.textContent=w;
 ul.appendChild(li);
});

// SELECCIÓN
let selected=[];

document.querySelectorAll(".cell").forEach((cell,i)=>{
 cell.addEventListener("click",()=>{
   if(cell.classList.contains("found")) return;
   cell.classList.toggle("selected");
   selected.push(cell);
   checkWord();
 });
});

let found=0;

function checkWord(){
 let word = selected.map(c=>c.textContent).join("");
 let index = wordList.indexOf(word);
 if(index!==-1){
   selected.forEach(c=>{
     c.classList.remove("selected");
     c.classList.add("found");
   });
   document.querySelectorAll("#words li")[index].classList.add("found");
   selected=[];
   found++;
   document.getElementById("score").textContent=found;
   if(found===wordList.length) endGame();
 }
 if(selected.length>12) selected=[];
}

// TIEMPO
let time=0;
setInterval(()=>{
 time++;
 document.getElementById("time").textContent=time;
},1000);

// FIN
function endGame(){
 document.getElementById("final").style.display="block";
 document.getElementById("final").innerHTML=
  "<strong>✅ Juego completado</strong><br>Tiempo: "+time+" segundos";
}
</script>
</body>
</html>

